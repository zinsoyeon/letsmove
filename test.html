<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="stylesheet" href="./css/comm.css">
    <link rel="stylesheet" href="./css/style.css">
    <title>움직여!</title>
    <style>


    </style>
</head>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/4.5.1/js/swiper.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/4.5.1/css/swiper.min.css">
<script>
    $(window).on('load', function() {
        slider();
    })

    function slider() {
        let swiper = undefined;
        let slideNum = $('.slider .swiper-slide').length //슬라이드 총 개수
        let slideInx = 0; //현재 슬라이드 index

        //디바이스 체크
        // let oldWChk = window.innerWidth > 767 ? 'pc' : 'mo';
        let oldWChk = 'mo';
        sliderAct();
        $(window).on('resize', function() {
            // let newWChk = window.innerWidth > 767 ? 'pc' : 'mo';
            let newWChk =  'mo';
            if (newWChk != oldWChk) {
                oldWChk = newWChk;
                sliderAct();
            }
        })

        //슬라이드 실행
        function sliderAct() {
            //슬라이드 초기화
            if (swiper != undefined) {
                swiper.destroy();
                swiper = undefined;
            }

            //slidesPerView 옵션 설정
            let viewNum = oldWChk == 'pc' ? 4 : 2;
            //loop 옵션 체크
            let loopChk = slideNum > viewNum;

            swiper = new Swiper(".slider .inner", {
                slidesPerView: "auto",
                initialSlide: slideInx,
                loop: loopChk,
                centeredSlides: true,
                navigation: {
                    nextEl: $('.slider .btn_next'),
                    prevEl: $('.slider .btn_prev'),
                },
                on: {
                    activeIndexChange: function() {
                        slideInx = this.realIndex; //현재 슬라이드 index 갱신
                    }
                },
            });
        }
    }


</script>

<body>
    <header>
        <h1>움직이는 여자들의 이야기</h1>
    </header>
    <div class="slider">
        <div class="inner">
            <ul class="swiper-wrapper slide_list">
                <li class="swiper-slide">slider1</li>
                <li class="swiper-slide">slider2</li>
                <li class="swiper-slide">slider3</li>
                <li class="swiper-slide">slider4</li>
                <li class="swiper-slide">slider5</li>
            </ul>
        </div>
        <span class="btn btn_prev">이전</span>
        <span class="btn btn_next">다음</span>
    </div>


</body>
</html>